const _find=(e,t=document)=>{let n=[];return"string"==typeof e?n=t.querySelectorAll(e):e instanceof Element?n=[e]:e instanceof NodeList?n=e:(e instanceof Window||e instanceof Document)&&(n=[e]),n.length,n},_el=(e,t=document)=>_find(e,t)[0]||null,_els=(e,t=document)=>_find(e,t),_remove=(e,t=document)=>{const n=_find(e,t);if(0===n.length)return!1;try{return n.forEach(e=>e.remove()),!0}catch(e){}return!1},_dispatch=(e,t,n={},o=0)=>{const i=_find(e)[0];if(i)try{o?setTimeout(function(){i.dispatchEvent(new CustomEvent(t,{detail:n}))},o):i.dispatchEvent(new CustomEvent(t,{detail:n}))}catch(e){}},_on=(e,t,n)=>{const o=_find(e);if(0===o.length)return;const i=[];return o.forEach(e=>{const o=e=>{n(e,e.detail)};e.addEventListener(t,o),i.push({remove:function(){e.removeEventListener(t,o)}})}),i},_once=(e,t,n)=>{const o=_find(e);if(0===o.length)return;const i=[];return o.forEach(e=>{const o=e=>{n(e,e.detail)};e.addEventListener(t,o,{once:!0}),i.push({remove:function(){e.removeEventListener(t,o)}})}),i},_is=(e,t)=>{const n=_find(e)[0];if(n)return n.matches(t)},_toggleClass=(e,t,n=null)=>{const o=_find(e);if(0===o.length)return;const i=Array.isArray(t)?t:t.split(/\s+/);o.forEach(e=>{i.forEach(t=>{null===n?e.classList.toggle(t):n?e.classList.add(t):e.classList.remove(t)})})},_addClass=(e,t)=>{_toggleClass(e,t,!0)},_removeClass=(e,t)=>{_toggleClass(e,t,!1)},_parseHTML=(e,t=!0)=>{if(!e)return null;if(t){const t=document.createElement("textarea");t.innerHTML=e,e=t.value}return(new DOMParser).parseFromString(e,"text/html").body.firstChild},_getUrlParam=(e,t=null)=>{const n=new URLSearchParams(window.location.search).get(e);return null!==n?n:t},_debounce=(e,t,n=!1)=>{var o;return function(){var i=this,s=arguments;n&&e.apply(i,s),clearTimeout(o),o=setTimeout(function(){o=null,e.apply(i,s)},t)}},_inViewport=(e,t,n=window.innerHeight/2)=>{const o=_find(e)[0],i=t?_find(t)[0]:window;if(!o||!i)return!1;const s=o.getBoundingClientRect();if(t===window)return s.top<window.innerHeight-n&&s.bottom>0&&s.left<window.innerWidth&&s.right>0;{const e=i.getBoundingClientRect();return s.top<e.bottom-n&&s.bottom>e.top&&s.left<e.right&&s.right>e.left}},_persist=(e,t=null,n=604800)=>{if("string"!=typeof e||""===e.trim())return;if(null===t)return _persistGet(e);const o="session"===n?sessionStorage:localStorage,i={data:t,expiration:"number"==typeof n?Date.now()+n:n};try{if(o)o.setItem(e,JSON.stringify(i));else{const t=n&&"number"==typeof n?`; expires=${new Date(Date.now()+n).toUTCString()}`:"";document.cookie=`${e}=${encodeURIComponent(JSON.stringify(i))}${t}; path=/`}}catch(e){}},_persistGet=e=>{if("string"!=typeof e||""===e.trim())return;let t=null,n="sessionStorage";try{let o=sessionStorage?sessionStorage.getItem(e):null;if(o){if(t=JSON.parse(o),t&&"session"===t.expiration)return t.data;t=null}if(!t&&localStorage&&(n="localStorage",o=localStorage?localStorage.getItem(e):null,o&&(t=JSON.parse(o))),!t){n="cookie";const o=document.cookie.split("; ").find(t=>t.startsWith(`${e}=`));o&&(t=JSON.parse(decodeURIComponent(o.split("=")[1])))}}catch(e){}return t&&t.expiration&&t.expiration<Date.now()?(_persistRemove(e),null):t?t.data:null},_persistRemove=e=>{if("string"==typeof e&&""!==e.trim())try{sessionStorage&&sessionStorage.removeItem(e),localStorage&&localStorage.removeItem(e),document.cookie=`${e}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/`}catch(e){}},_libbyLog=(...e)=>{if(_is("body",".dev"))return console.debug(...e)},_libbyInit=()=>{window._libbyReady||(window._debounce=_debounce,window._dispatch=_dispatch,window._find=_find,window._el=_el,window._els=_els,window._remove=_remove,window._on=_on,window._once=_once,window._is=_is,window._toggleClass=_toggleClass,window._addClass=_addClass,window._removeClass=_removeClass,window._parseHTML=_parseHTML,window._getUrlParam=_getUrlParam,window._inViewport=_inViewport,window._persist=_persist,window._persistGet=_persistGet,window._persistRemove=_persistRemove,window._libbyLog=_libbyLog)};_libbyInit(),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",async()=>{window._libbyReady||(window._libbyReady=!0,_dispatch(window,"libby:ready"))}):setTimeout(async()=>{window._libbyReady||(window._libbyReady=!0,_dispatch(window,"libby:ready"))},0);export{_find,_el,_els,_remove,_dispatch,_on,_once,_is,_toggleClass,_addClass,_removeClass,_parseHTML,_getUrlParam,_debounce,_inViewport,_persist,_persistGet,_persistRemove,_libbyLog,_libbyInit};